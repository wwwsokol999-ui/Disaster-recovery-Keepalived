# Disaster-recovery-Keepalived
# üîÅ –ó–∞–¥–∞–Ω–∏–µ 1
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HSRP (Hot Standby Router Protocol) –≤ Cisco Packet Tracer

---

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π —à–ª—é–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ **HSRP** –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- —Ä–∞–±–æ—Ç—É Active/Standby
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ç–µ—Ä–∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É PC –∏ Server

---

## üó∫ –°—Ö–µ–º–∞ —Å–µ—Ç–∏

### –¢–æ–ø–æ–ª–æ–≥–∏—è

- 2 –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ (Router1, Router2)
- 2 –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ (Switch0, Switch1)
- 1 –ü–ö (PC0)
- 1 —Å–µ—Ä–≤–µ—Ä (Server0)

### –ü–æ–¥—Å–µ—Ç–∏

| –°–µ–≥–º–µ–Ω—Ç | –ü–æ–¥—Å–µ—Ç—å | Virtual IP |
|--------|---------|-----------|
| LAN PC | 192.168.0.0/24 | 192.168.0.1 |
| LAN Server | 192.168.1.0/24 | 192.168.1.1 |

---

# ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üîπ Router1 (–æ—Å–Ω–æ–≤–Ω–æ–π)

### Gi0/0 ‚Äî Group 0
```bash
conf t
interface g0/0
 standby version 2
 standby 0 ip 192.168.0.1
 standby 0 priority 105
 standby 0 preempt
```

### Gi0/1 ‚Äî Group 1
```bash
interface g0/1
 standby version 2
 standby 1 ip 192.168.1.1
 standby 1 priority 110
 standby 1 preempt
end
wr
```

---

## üîπ Router2 (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)

### Gi0/0
```bash
conf t
interface g0/0
 standby version 2
 standby 0 ip 192.168.0.1
 standby 0 priority 100
 standby 0 preempt
```

### Gi0/1
```bash
interface g0/1
 standby version 2
 standby 1 ip 192.168.1.1
 standby 1 priority 100
 standby 1 preempt
end
wr
```

---

# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è HSRP

```bash
show standby brief
```

### Router1
```
Gi0/0  Active
Gi0/1  Active
```

### Router2
```
Gi0/0  Standby
Gi0/1  Standby
```

---

# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

---

## 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ –æ—Ç–∫–∞–∑–∞

```bash
PC0> ping 192.168.1.50
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)
```

---

## 2Ô∏è‚É£ –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–∫–∞–∑–∞

- –æ—Ç–∫–ª—é—á—ë–Ω –∫–∞–±–µ–ª—å **Switch0 ‚Üî Router2**
- –ø–æ–≤—Ç–æ—Ä–Ω—ã–π ping

---

## 3Ô∏è‚É£ –ü–æ—Å–ª–µ –æ—Ç–∫–∞–∑–∞

```bash
PC0> ping 192.168.1.50
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)
```

üëâ —Å–≤—è–∑—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞  
üëâ —Ç—Ä–∞—Ñ–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –Ω–∞ Router1

---

# üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|
| topology.png | —Å—Ö–µ–º–∞ —Å–µ—Ç–∏ |
| router1_cli.png | –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Router1 |
| router2_cli.png | –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Router2 |
| hsrp_status.png | show standby brief |
| ping_success.png | —É—Å–ø–µ—à–Ω—ã–π ping –ø–æ—Å–ª–µ –æ—Ç–∫–∞–∑–∞ |

---

# ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–í—ã–ø–æ–ª–Ω–µ–Ω–æ:

‚úî –ù–∞—Å—Ç—Ä–æ–µ–Ω HSRP  
‚úî –û–ø—Ä–µ–¥–µ–ª—ë–Ω Active/Standby  
‚úî –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ preempt  
‚úî –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä—ã–≤–µ  
‚úî –ü–æ—Ç–µ—Ä—å –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ—Ç  

---

# üìå –í—ã–≤–æ–¥

HSRP –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —à–ª—é–∑–∞
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
- –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–µ—Ç–∏

–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Å—Ç—Ä–æ—è –æ–¥–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞.

---

# üß† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
standby version 2
standby <group> ip <virtual-ip>
standby <group> priority <value>
standby <group> preempt
show standby brief
```

---
# Disaster-recovery-Keepalived

# üß™ –ó–∞–¥–∞–Ω–∏–µ 2

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ (Keepalived + VRRP) –≤ Linux

---

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ **VRRP (Keepalived)** –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- —Ä–∞–±–æ—Ç—É Active/Backup
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ MASTER
- –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –ø–æ –æ–¥–Ω–æ–º—É Virtual IP
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Å—Ç–æ—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

---

## üñß –°—Ö–µ–º–∞ —Å–µ—Ç–∏

### –¢–æ–ø–æ–ª–æ–≥–∏—è

- 2 Linux VM (Ubuntu)
- nginx –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- Keepalived (VRRP)
- 1 Virtual IP

---

### –ü–æ–¥—Å–µ—Ç–∏

| –£–∑–µ–ª | IP |
|-------|----------------|
| Server1 (MASTER) | 192.168.238.130 |
| Server2 (BACKUP) | 192.168.238.131 |
| Virtual IP (VIP) | 192.168.238.200 |

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û

–ù–∞ **–æ–±–µ–∏—Ö –í–ú**:

```bash
sudo apt update
sudo apt install nginx keepalived curl netcat -y
sudo systemctl enable nginx
sudo systemctl start nginx


# üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Cisco Packet Tracer.
